<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Redshift SSD Benchmarks - Sunil Raut</title>
  <link href="/atom.xml" rel="alternate" title="Sunil Raut" type="application/atom+xml" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link rel="stylesheet" href="/js/icons/style.css">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" id="font-bitter-css" href="https://fonts.googleapis.com/css?family=Bitter:400,700" type="text/css" media="screen" />
  <link rel="shortcut icon" type="image/x-icon" href="/images/contents/fav.png" />
  <link rel="search" type="application/opensearchdescription+xml" title="sourabhbajaj.com" href="/opensearch.xml" />

  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/" />
  <meta property="og:title" content="Redshift SSD Benchmarks" />
  <meta property="og:description" content="Benchmark different AWS Redshift for speed, cost and performance on large and small queries." />
  <meta property="og:image" content="https://sourabhbajaj.com/images/contents/NN.png" />

  <meta name="twitter:site" value="@RautsunilSunil" />
  <meta property="twitter:title" content="Redshift SSD Benchmarks" />
  <meta property="twitter:description" content="Benchmark different AWS Redshift for speed, cost and performance on large and small queries." />
  <meta property="twitter:image" content="https://sourabhbajaj.com/images/contents/NN.png"/>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40495390-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-40495390-2');
  </script>
  <script>
    var trackOutboundLink = function(url) {
      gtag('event', 'click', {
        'event_category': 'outbound',
        'event_label': url,
        'transport_type': 'beacon',
        'event_callback': function(){document.location = url;}
      });
    }
  </script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Redshift SSD Benchmarks" />
<meta name="author" content="Sunil Raut" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Benchmark different AWS Redshift for speed, cost and performance on large and small queries." />
<meta property="og:description" content="Benchmark different AWS Redshift for speed, cost and performance on large and small queries." />
<link rel="canonical" href="http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/" />
<meta property="og:url" content="http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/" />
<meta property="og:site_name" content="Sunil Raut" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-12-20T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@RautsunilSunil" />
<meta name="twitter:creator" content="@Sunil Raut" />
<script type="application/ld+json">
{"description":"Benchmark different AWS Redshift for speed, cost and performance on large and small queries.","author":{"@type":"Person","name":"Sunil Raut"},"@type":"BlogPosting","url":"http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/contents/0.png"},"name":"Sunil Raut"},"headline":"Redshift SSD Benchmarks","dateModified":"2014-12-20T00:00:00+05:30","datePublished":"2014-12-20T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body class="">
  <div id="container">
    <div class="wrap">
    <div id="header">
      <div id="branding">
        <h1 id="site-title">
          <a href="/" title="Sunil Raut" rel="Home">Sunil Raut</a>
        </h1>
      </div>

      <div id="menu-primary" class="menu-container">
        <div class="menu">
          <ul id="menu-primary-items">
            <li class="menu-item home"><a class="spec" href="/">Home</a></li>
            <li class="menu-item projects"><a class="spec" href="/projects">Projects</a></li>
            <li class="menu-item talks"><a class="spec" href="/talks">Talks</a></li>
            <li class="menu-item blog"><a class="spec" href="/blog/">Blog</a></li>
            <li class="menu-item github"><a class="spec" href="https://github.com/rautsunil" target="_blank">Github</a></li>
            <li class="menu-item rss">
              <div class="rss-button">
                <a href="/atom.xml" target="_blank">
                  <img src="/images/social/RSSButton.png" alt="RSS Feed" height="20px"/>
                </a>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="clear"></div>
    </div>

    <div id="main">


<div id="content">
  <div class="hfeed">
    <div class="hentry post">
      <div class="post-content">
        <div class="sticky-header">
          <h1>Redshift SSD Benchmarks</h1>
          
          <div class="byline">December 20, 2014 . <a href="/blog/categories.html#Data Infrastructure" class="category">Data Infrastructure</a></div>
        </div>

        <div id="toc" class="toc"></div>

        <div class="entry-content">
          <p>Our warehouse runs completely on Redshift, and query performance is extremely important to us. Earlier this year, the AWS team announced the release of SSD instances for Amazon Redshift. Is the extra CPU truly worth it? We do a lot of processing with Redshift, so this question is big for us. To answer this, we decided to benchmark SSD performance and compare it to our original HDD performance.</p>

<p>Redshift is easy to use because its PostgreSQL JDBC drivers allow us to use a range of familiar SQL clients. Its speedy performance is achieved through columnar storage and data compression.</p>

<h2 id="experiment-setup">Experiment Setup</h2>
<p>The Redshift instance specs are based off on-demand pricing, but the reserved instances can be 75% more affordable. The results from the benchmark are the mean run times after running each query 3 times.</p>

<table>
  <thead>
    <tr>
      <th> </th>
      <th style="text-align: left">HDD Setup 1</th>
      <th style="text-align: left">HDD Setup 2</th>
      <th style="text-align: left">HDD Setup 3</th>
      <th style="text-align: left">HDD Setup 4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Nodes</td>
      <td style="text-align: left">4 dw1.xlarge</td>
      <td style="text-align: left">8 dw1.xlarge</td>
      <td style="text-align: left">32 dw2.large</td>
      <td style="text-align: left">4 dw2.8xlarge</td>
    </tr>
    <tr>
      <td>Storage</td>
      <td style="text-align: left">8 TB</td>
      <td style="text-align: left">16 TB</td>
      <td style="text-align: left">5.12 TB</td>
      <td style="text-align: left">10.24 TB</td>
    </tr>
    <tr>
      <td>Memory</td>
      <td style="text-align: left">60 GB</td>
      <td style="text-align: left">120 GB</td>
      <td style="text-align: left">480 GB</td>
      <td style="text-align: left">976 GB</td>
    </tr>
    <tr>
      <td>vCPU</td>
      <td style="text-align: left">8</td>
      <td style="text-align: left">16</td>
      <td style="text-align: left">64</td>
      <td style="text-align: left">128</td>
    </tr>
    <tr>
      <td>Price ($/hr)</td>
      <td style="text-align: left">3.4</td>
      <td style="text-align: left">6.8</td>
      <td style="text-align: left">8.0</td>
      <td style="text-align: left">19.2</td>
    </tr>
  </tbody>
</table>

<h3 id="query-1">Query 1.</h3>
<p>First, we ran a simple join query between a table with 1 billion rows and a table with 50 million rows. The total amount of data processed was around 46GB. The results fell in favour of SSD’s.</p>

<p><img src="https://dnsta5v53r71w.cloudfront.net/images/redshift-ssd-benchmark/1a.png" alt="Screenshot" style="width: 80%; margin-left:10%; margin-right:10%; margin-top:20px; margin-bottom:20px;" /></p>

<h3 id="query-2">Query 2.</h3>
<p>This complex query features REGEX matching and aggregate functions across 1 million rows from 4 joins. The total amount of data processed was around 100GB. The results fell even more in favour of SSD’s from 5x - 15x the performance improvement.</p>

<p><img src="https://dnsta5v53r71w.cloudfront.net/images/redshift-ssd-benchmark/2.png" alt="Screenshot" style="width: 80%; margin-left:10%; margin-right:10%; margin-top:20px; margin-bottom:20px;" /></p>

<h3 id="query-3">Query 3.</h3>
<p>A query that runs window functions on a table of 1 billion rows showed surprising results. The total amount of data in this table is about 400GB. Although the SSD’s performed better, the smaller SSD’s out-performed the bigger SSD’s despite having double the memory and CPU power.</p>

<p><img src="https://dnsta5v53r71w.cloudfront.net/images/redshift-ssd-benchmark/3.png" alt="Screenshot" style="width: 80%; margin-left:10%; margin-right:10%; margin-top:20px; margin-bottom:20px;" /></p>

<h3 id="query-4">Query 4.</h3>
<p>This last query has 4 join statements with a subquery that also includes 2 joins. The amount of data processed is around 107GB. Since this query is very compute-heavy, it is not surprising that SSD’s perform 10x better. What is shocking is that the smaller SSD’s are once again more performant than the bigger SSD’s.</p>

<p><img src="https://dnsta5v53r71w.cloudfront.net/images/redshift-ssd-benchmark/4a.png" alt="Screenshot" style="width: 80%; margin-left:10%; margin-right:10%; margin-top:20px; margin-bottom:20px;" /></p>

<h2 id="conclusion">Conclusion</h2>
<p>We also ran some other queries and the performance improvement from HDD to SSD was consistent at about 5 - 10 times. From these experiments, the DW2 machines are clearly promising in terms of computation time. For the same price, SSD’s provide 3.4 times more CPU power and memory. However, the disk storage is about 25% of that of the HDD’s.</p>

<p>A limitation to the dw2.large SSD instances is that a Redshift cluster can support at most 32 of them. That means dw2.large’s can provide at most 5.12 TB of disk storage. The only other option is to upgrade to dw2.8xlarge’s but this experiment shows little performance benefits from dw2.large’s to dw2.8xlarge’s despite doubling the memory and CPU.</p>

<p><i><small>PS: This was originally written by Jason Shao on the <a href="https://tech.coursera.org/blog/2014/12/19/redshift-benchmark/">Coursera blog</a>.</small></i></p>

        </div>

        <div class="sharebuttons">
  <hr />
  <ul>
    <li>
      <p class="sharetitle"> Share this: </p>
    </li>
    <li class="reddit">
      <a href="http://www.reddit.com/submit?url=http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/&title=Redshift%20SSD%20Benchmarks" target="_blank" onclick="trackOutboundLink('http://www.reddit.com/submit?url=/blog/2014/12/20/redshift-ssd-benchmarks/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1067 1129q13 13 0 26-53 53-171 53t-171-53q-13-13 0-26 5-6 13-6t13 6q42 42 145 42t145-42q5-6 13-6t13 6zm-263-156q0 31-23 54t-54 23-54-23-23-54q0-32 22.5-54.5t54.5-22.5 54.5 22.5 22.5 54.5zm338 0q0 31-23 54t-54 23-54-23-23-54q0-32 22.5-54.5t54.5-22.5 54.5 22.5 22.5 54.5zm215-103q0-42-30-72t-73-30q-42 0-73 31-113-78-267-82l54-243 171 39q1 32 23.5 54t53.5 22q32 0 54.5-22.5t22.5-54.5-22.5-54.5-54.5-22.5q-48 0-69 43l-189-42q-17-5-21 13l-60 268q-154 6-265 83-30-32-74-32-43 0-73 30t-30 72q0 30 16 55t42 38q-5 25-5 48 0 122 120 208.5t289 86.5q170 0 290-86.5t120-208.5q0-25-6-49 25-13 40.5-37.5t15.5-54.5zm307-454v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
    <li class="hn">
      <a href="http://news.ycombinator.com/submitlink?u=http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/&t=Redshift%20SSD%20Benchmarks" target="_blank" onclick="trackOutboundLink('http://news.ycombinator.com/submitlink?u=/blog/2014/12/20/redshift-ssd-benchmarks/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M937 1004l266-499h-112l-157 312q-24 48-44 92l-42-92-155-312h-120l263 493v324h101v-318zm727-588v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
    <li class="twitter">
      <a href="https://twitter.com/intent/tweet?via=sb2nov&url=http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/&text=Redshift%20SSD%20Benchmarks" target="_blank" onclick="trackOutboundLink('https://twitter.com/intent/tweet?via=sb2nov&url=/blog/2014/12/20/redshift-ssd-benchmarks/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 610q-56 25-121 34 68-40 93-117-65 38-134 51-61-66-153-66-87 0-148.5 61.5t-61.5 148.5q0 29 5 48-129-7-242-65t-192-155q-29 50-29 106 0 114 91 175-47-1-100-26v2q0 75 50 133.5t123 72.5q-29 8-51 8-13 0-39-4 21 63 74.5 104t121.5 42q-116 90-261 90-26 0-50-3 148 94 322 94 112 0 210-35.5t168-95 120.5-137 75-162 24.5-168.5q0-18-1-27 63-45 105-109zm256-194v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
<!--     <li class="facebook">
      <a href="http://www.facebook.com/sharer.php?u=http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/&t=Redshift%20SSD%20Benchmarks" target="_blank" onclick="trackOutboundLink('http://www.reddit.com/submit?url=/blog/2014/12/20/redshift-ssd-benchmarks/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1376 128q119 0 203.5 84.5t84.5 203.5v960q0 119-84.5 203.5t-203.5 84.5h-188v-595h199l30-232h-229v-148q0-56 23.5-84t91.5-28l122-1v-207q-63-9-178-9-136 0-217.5 80t-81.5 226v171h-200v232h200v595h-532q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960z"/></svg>
      </a>
    </li> -->
    <li class="linkedin">
      <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/blog/2014/12/20/redshift-ssd-benchmarks/&title=Redshift%20SSD%20Benchmarks" target="_blank" onclick="trackOutboundLink('http://www.linkedin.com/shareArticle?url=sb2nov&url=/blog/2014/12/20/redshift-ssd-benchmarks/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M365 1414h231v-694h-231v694zm246-908q-1-52-36-86t-93-34-94.5 34-36.5 86q0 51 35.5 85.5t92.5 34.5h1q59 0 95-34.5t36-85.5zm585 908h231v-398q0-154-73-233t-193-79q-136 0-209 117h2v-101h-231q3 66 0 694h231v-388q0-38 7-56 15-35 45-59.5t74-24.5q116 0 116 157v371zm468-998v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
  </ul>
</div>

      </div>
    </div>
  </div>
</div><!-- #content -->

      </div><!-- #main -->

      <div class="clear"></div>

      <div id="fotterLinks">
        <a href="https://www.linkedin.com/in/sunil-raut-3a199858" alt="LinkedIn" target="_blank" onclick="trackOutboundLink('https://www.linkedin.com/in/sunil-raut-3a199858');">LinkedIn</a>
        |
        <a href="https://github.com/rautsunil" alt="Github" target="_blank" onclick="trackOutboundLink('http://github.com/?loc=bottom');">Github</a>
        |
        <a href="https://twitter.com/RautsunilSunil" alt="Twitter" target="_blank" onclick="trackOutboundLink('http://twitter.com/?loc=bottom');">Twitter</a>
        |        |
        <a href="mailto:rautsunil@outlook.com" alt="email" target="_blank" onclick="trackOutboundLink('mailto:rautsuil@outlook.com');">Email</a>
      </div>

      <div id="copyright">
        &copy; 2012–2019 <a href="https://sourabhbajaj.com/">Sunil Raut</a>. All rights reserved.
      </div>
    </div><!-- .wrap -->
  </div><!-- #container -->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="/js/toc/toc.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.toc').toc({
        title: '',
        listType: 'ol',
        minimumHeaders: 2,
        headers: 'h2, h3, h4, h5, h6',
        linkHere: true,
        linkHereTitle: 'Link here',
        backToTop: true,
        backToTopId: 'toc',
        backToTopTitle: 'Back to Table of Contents',
      });
      $('.jekyll-toc-header a.jekyll-toc-link-here span.jekyll-toc-icon').addClass('icon icon-link');
      $('.jekyll-toc-header a.jekyll-toc-back-to-top span.jekyll-toc-icon').addClass('icon icon-chevron-up');
    });
  </script>
</body>
</html>

