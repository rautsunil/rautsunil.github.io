<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>What's your ML test score? - Sunil Raut</title>
  <link href="/atom.xml" rel="alternate" title="Sunil Raut" type="application/atom+xml" />
  <link rel="stylesheet" type="text/css" href="/css/style.css" />
  <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
  <link rel="stylesheet" href="/js/icons/style.css">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" id="font-bitter-css" href="https://fonts.googleapis.com/css?family=Bitter:400,700" type="text/css" media="screen" />
  <link rel="shortcut icon" type="image/x-icon" href="/images/contents/fav.png" />
  <link rel="search" type="application/opensearchdescription+xml" title="sourabhbajaj.com" href="/opensearch.xml" />

  <meta property="og:type" content="website" />
  <meta property="og:url" content="http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/" />
  <meta property="og:title" content="What's your ML test score?" />
  <meta property="og:description" content="Paper summary: What's your ML test score? A rubric for ML testing and monitoring of production systems." />
  <meta property="og:image" content="https://sourabhbajaj.com/images/contents/NN.png" />

  <meta name="twitter:site" value="@RautsunilSunil" />
  <meta property="twitter:title" content="What's your ML test score?" />
  <meta property="twitter:description" content="Paper summary: What's your ML test score? A rubric for ML testing and monitoring of production systems." />
  <meta property="twitter:image" content="https://sourabhbajaj.com/images/contents/NN.png"/>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40495390-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-40495390-2');
  </script>
  <script>
    var trackOutboundLink = function(url) {
      gtag('event', 'click', {
        'event_category': 'outbound',
        'event_label': url,
        'transport_type': 'beacon',
        'event_callback': function(){document.location = url;}
      });
    }
  </script>
  <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="What’s your ML test score?" />
<meta name="author" content="Sunil Raut" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Paper summary: What’s your ML test score? A rubric for ML testing and monitoring of production systems." />
<meta property="og:description" content="Paper summary: What’s your ML test score? A rubric for ML testing and monitoring of production systems." />
<link rel="canonical" href="http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/" />
<meta property="og:url" content="http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/" />
<meta property="og:site_name" content="Sunil Raut" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-09-07T00:00:00+05:30" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@RautsunilSunil" />
<meta name="twitter:creator" content="@Sunil Raut" />
<script type="application/ld+json">
{"description":"Paper summary: What’s your ML test score? A rubric for ML testing and monitoring of production systems.","author":{"@type":"Person","name":"Sunil Raut"},"@type":"BlogPosting","url":"http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/images/contents/0.png"},"name":"Sunil Raut"},"headline":"What’s your ML test score?","dateModified":"2017-09-07T00:00:00+05:30","datePublished":"2017-09-07T00:00:00+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body class="">
  <div id="container">
    <div class="wrap">
    <div id="header">
      <div id="branding">
        <h1 id="site-title">
          <a href="/" title="Sunil Raut" rel="Home">Sunil Raut</a>
        </h1>
      </div>

      <div id="menu-primary" class="menu-container">
        <div class="menu">
          <ul id="menu-primary-items">
            <li class="menu-item home"><a class="spec" href="/">Home</a></li>
            <li class="menu-item projects"><a class="spec" href="/projects">Projects</a></li>
            <li class="menu-item talks"><a class="spec" href="/talks">Talks</a></li>
            <li class="menu-item blog"><a class="spec" href="/blog/">Blog</a></li>
            <li class="menu-item github"><a class="spec" href="https://github.com/rautsunil" target="_blank">Github</a></li>
            <li class="menu-item rss">
              <div class="rss-button">
                <a href="/atom.xml" target="_blank">
                  <img src="/images/social/RSSButton.png" alt="RSS Feed" height="20px"/>
                </a>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="clear"></div>
    </div>

    <div id="main">


<div id="content">
  <div class="hfeed">
    <div class="hentry post">
      <div class="post-content">
        <div class="sticky-header">
          <h1>What's your ML test score?</h1>
          
          <div class="byline">September 07, 2017 . <a href="/blog/categories.html#Machine Learning" class="category">Machine Learning</a>, <a href="/blog/categories.html#Papers" class="category">Papers</a></div>
        </div>

        <div id="toc" class="toc"></div>

        <div class="entry-content">
          <p>Using machine-learning systems in production is very different from running offline experiments as you run into problems such as train/test skew, latency and resource requirements. The paper <a href="https://research.google.com/pubs/pub45742.html">What’s your ML Test Score?</a> by Eric Breck etc. provides a rubric for measuring the quality of ML system design.</p>

<p>The rubric has four sections so we’ll go over each of them.</p>

<h3 id="tests-for-features-and-data">Tests for Features and Data</h3>

<ul>
  <li>Distributions of each feature</li>
  <li>Features are same in both the training and serving stack</li>
  <li>Relationship between different features and targets</li>
  <li>Privacy control in model training</li>
  <li>Cost of computing each feature</li>
  <li>Does not contain features determined unsuitable for use</li>
  <li>Time to add new features to production</li>
</ul>

<p>Points around expensive and redundant features are important as they can affect the ability of the system to meet the desired latency and throughput requirements. One options to solve such issues is to pre-cache expensive features and use them at prediction time but this can yield to a lot of redundant compute.</p>

<p>I liked the point around making sure we’re not using features determined un-suitable in the context of ML Fairness as we could potentially ban features such as gender etc.</p>

<h3 id="tests-for-model-development">Tests for Model Development</h3>

<ul>
  <li>Model code goes through code review</li>
  <li>Offline proxy metrics are measuring what will be A/B tested</li>
  <li>Hyperparameter tuning</li>
  <li>Effect of model staleness</li>
  <li>Simple models as a baseline</li>
  <li>Model performs well across different data slices</li>
  <li>Test for implicit bias in the model or data</li>
</ul>

<p>Touches on aspects of good design principles such as optimizing for the right metrics, measuring staleness and updating the model on time. The point around good performance on different data slices is specially valid when majority data to the website might come from English speaking or developed countries etc.</p>

<h3 id="tests-for-ml-infrastructure">Tests for ML Infrastructure</h3>

<ul>
  <li>Reproducibility of model training</li>
  <li>Integrations tests for the ML systems</li>
  <li>Quality tests before deployment of the model</li>
  <li>Ability to rollback deployed models</li>
  <li>Testing via a canary process</li>
</ul>

<p>Here most points are easy to follow in this list but something that I have found hard in experience is the quality tests. One example being recommendation systems, since the output of the system may change from time to time. It is hard to write automated tests that measure quality; interested in learning how others solve this problem.</p>

<h3 id="monitoring-tests-for-ml-systems">Monitoring Tests for ML Systems</h3>

<ul>
  <li>Upstream instability in features, both in training and serving</li>
  <li>Data invariants hold in training and serving inputs</li>
  <li>Model staleness</li>
  <li>Train/Test skew in features and inputs</li>
  <li>Slow leak regression in latency, throughput etc.</li>
  <li>Regression in prediction quality</li>
</ul>

<p>This was a fantastic list as it covers a lot of hidden problems in model serving. As models get larger it can get expensive to serve them or features get more expensive to compute. Useful tools could be monitoring success metrics as a time-series and seeing if we hit consistent performance. Another could be to always have a small A/B test running against the old / baseline model.</p>

<p>The paper touches on basic problems that you run into quite often but are not talked about much in the ML community. Curious to know, how the problems around feature engineering and model complexity evolve with advent of Deep Learning models.</p>

<h3 id="references">References</h3>

<ul>
  <li>[1] Breck, E., Cai, S., Nielsen, E., Salib, M., &amp; Sculley, D. (2016). What’s your ML Test Score? A rubric for ML production systems. Reliable Machine Learning in the Wild - NIPS 2016 Workshop, (NIPS).</li>
</ul>

        </div>

        <div class="sharebuttons">
  <hr />
  <ul>
    <li>
      <p class="sharetitle"> Share this: </p>
    </li>
    <li class="reddit">
      <a href="http://www.reddit.com/submit?url=http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/&title=What's%20your%20ML%20test%20score?" target="_blank" onclick="trackOutboundLink('http://www.reddit.com/submit?url=/blog/2017/09/07/what-s-your-ml-test-score/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1067 1129q13 13 0 26-53 53-171 53t-171-53q-13-13 0-26 5-6 13-6t13 6q42 42 145 42t145-42q5-6 13-6t13 6zm-263-156q0 31-23 54t-54 23-54-23-23-54q0-32 22.5-54.5t54.5-22.5 54.5 22.5 22.5 54.5zm338 0q0 31-23 54t-54 23-54-23-23-54q0-32 22.5-54.5t54.5-22.5 54.5 22.5 22.5 54.5zm215-103q0-42-30-72t-73-30q-42 0-73 31-113-78-267-82l54-243 171 39q1 32 23.5 54t53.5 22q32 0 54.5-22.5t22.5-54.5-22.5-54.5-54.5-22.5q-48 0-69 43l-189-42q-17-5-21 13l-60 268q-154 6-265 83-30-32-74-32-43 0-73 30t-30 72q0 30 16 55t42 38q-5 25-5 48 0 122 120 208.5t289 86.5q170 0 290-86.5t120-208.5q0-25-6-49 25-13 40.5-37.5t15.5-54.5zm307-454v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
    <li class="hn">
      <a href="http://news.ycombinator.com/submitlink?u=http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/&t=What's%20your%20ML%20test%20score?" target="_blank" onclick="trackOutboundLink('http://news.ycombinator.com/submitlink?u=/blog/2017/09/07/what-s-your-ml-test-score/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M937 1004l266-499h-112l-157 312q-24 48-44 92l-42-92-155-312h-120l263 493v324h101v-318zm727-588v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
    <li class="twitter">
      <a href="https://twitter.com/intent/tweet?via=sb2nov&url=http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/&text=What's%20your%20ML%20test%20score?" target="_blank" onclick="trackOutboundLink('https://twitter.com/intent/tweet?via=sb2nov&url=/blog/2017/09/07/what-s-your-ml-test-score/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1408 610q-56 25-121 34 68-40 93-117-65 38-134 51-61-66-153-66-87 0-148.5 61.5t-61.5 148.5q0 29 5 48-129-7-242-65t-192-155q-29 50-29 106 0 114 91 175-47-1-100-26v2q0 75 50 133.5t123 72.5q-29 8-51 8-13 0-39-4 21 63 74.5 104t121.5 42q-116 90-261 90-26 0-50-3 148 94 322 94 112 0 210-35.5t168-95 120.5-137 75-162 24.5-168.5q0-18-1-27 63-45 105-109zm256-194v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
<!--     <li class="facebook">
      <a href="http://www.facebook.com/sharer.php?u=http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/&t=What's%20your%20ML%20test%20score?" target="_blank" onclick="trackOutboundLink('http://www.reddit.com/submit?url=/blog/2017/09/07/what-s-your-ml-test-score/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1376 128q119 0 203.5 84.5t84.5 203.5v960q0 119-84.5 203.5t-203.5 84.5h-188v-595h199l30-232h-229v-148q0-56 23.5-84t91.5-28l122-1v-207q-63-9-178-9-136 0-217.5 80t-81.5 226v171h-200v232h200v595h-532q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960z"/></svg>
      </a>
    </li> -->
    <li class="linkedin">
      <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/blog/2017/09/07/what-s-your-ml-test-score/&title=What's%20your%20ML%20test%20score?" target="_blank" onclick="trackOutboundLink('http://www.linkedin.com/shareArticle?url=sb2nov&url=/blog/2017/09/07/what-s-your-ml-test-score/');">
        <svg width="1792" height="1792" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M365 1414h231v-694h-231v694zm246-908q-1-52-36-86t-93-34-94.5 34-36.5 86q0 51 35.5 85.5t92.5 34.5h1q59 0 95-34.5t36-85.5zm585 908h231v-398q0-154-73-233t-193-79q-136 0-209 117h2v-101h-231q3 66 0 694h231v-388q0-38 7-56 15-35 45-59.5t74-24.5q116 0 116 157v371zm468-998v960q0 119-84.5 203.5t-203.5 84.5h-960q-119 0-203.5-84.5t-84.5-203.5v-960q0-119 84.5-203.5t203.5-84.5h960q119 0 203.5 84.5t84.5 203.5z"/></svg>
      </a>
    </li>
  </ul>
</div>

      </div>
    </div>
  </div>
</div><!-- #content -->

      </div><!-- #main -->

      <div class="clear"></div>

      <div id="fotterLinks">
        <a href="https://www.linkedin.com/in/sunil-raut-3a199858" alt="LinkedIn" target="_blank" onclick="trackOutboundLink('https://www.linkedin.com/in/sunil-raut-3a199858');">LinkedIn</a>
        |
        <a href="https://github.com/rautsunil" alt="Github" target="_blank" onclick="trackOutboundLink('http://github.com/?loc=bottom');">Github</a>
        |
        <a href="https://twitter.com/RautsunilSunil" alt="Twitter" target="_blank" onclick="trackOutboundLink('http://twitter.com/?loc=bottom');">Twitter</a>
        |        |
        <a href="mailto:rautsunil@outlook.com" alt="email" target="_blank" onclick="trackOutboundLink('mailto:rautsuil@outlook.com');">Email</a>
      </div>

      <div id="copyright">
        &copy; 2012–2019 <a href="https://sourabhbajaj.com/">Sunil Raut</a>. All rights reserved.
      </div>
    </div><!-- .wrap -->
  </div><!-- #container -->

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="/js/toc/toc.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.toc').toc({
        title: '',
        listType: 'ol',
        minimumHeaders: 2,
        headers: 'h2, h3, h4, h5, h6',
        linkHere: true,
        linkHereTitle: 'Link here',
        backToTop: true,
        backToTopId: 'toc',
        backToTopTitle: 'Back to Table of Contents',
      });
      $('.jekyll-toc-header a.jekyll-toc-link-here span.jekyll-toc-icon').addClass('icon icon-link');
      $('.jekyll-toc-header a.jekyll-toc-back-to-top span.jekyll-toc-icon').addClass('icon icon-chevron-up');
    });
  </script>
</body>
</html>

